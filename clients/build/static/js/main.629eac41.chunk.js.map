{"version":3,"sources":["context/AuthContext.js","hooks/http.hook.js","pages/AuthPage.js","hooks/message.hook.js","pages/CreatePage.js","components/LinkCard.js","components/Loader.js","pages/DetailsPage.js","components/LinksList.js","pages/LinksPage.js","hooks/auth.hook.js","components/Navbar.js","App.js","routes.js","reportWebVitals.js","index.js"],"names":["noop","AuthContext","createContext","token","userId","login","logout","isAuthenticated","useHttp","useState","loading","setLoading","error","setError","request","useCallback","url","a","method","body","headers","JSON","stringify","fetch","response","json","data","ok","Error","message","clearError","AuthPage","auth","useContext","text","window","M","toast","html","email","password","form","setForm","useEffect","updateTextFields","changeHandler","event","target","name","value","registerHandler","loginHandler","className","placeholder","id","type","onChange","htmlFor","style","marginRight","disabled","onClick","CreatePage","history","useHistory","link","setLink","pressHandler","key","from","Authorization","push","_id","console","log","paddingTop","e","onKeyPress","LinkCard","href","to","rel","clicks","Date","date","toLocaleDateString","Loader","display","justifyContent","DetailsPage","linkId","useParams","getLink","fetched","LinksList","links","length","map","index","LinksPage","setLinks","fetchLinks","storageName","Navbar","padding","preventDefault","App","setToken","ready","setReady","setUserId","jwtToken","localStorage","setItem","removeItem","parse","getItem","useAuth","routes","path","exact","useRoutes","Provider","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.629eac41.chunk.js","sourcesContent":["import { createContext } from \"react\";\r\n\r\nfunction noop(){}\r\nexport const AuthContext = createContext({\r\n    token: null,\r\n    userId: null,\r\n    login: noop,\r\n    logout: noop,\r\n    isAuthenticated: false\r\n})","import { useCallback, useState } from \"react\";\r\n\r\nexport const useHttp = () => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const request = useCallback(\r\n    async (url, method = \"GET\", body = null, headers = {}) => {\r\n      setLoading(true);\r\n      try {\r\n\r\n        if (body) {\r\n          body = JSON.stringify(body)\r\n          headers[\"Content-Type\"] = 'application/json'\r\n        }\r\n\r\n        const response = await fetch(url, { method, body, headers });\r\n        const data = await response.json();\r\n        if (!response.ok) {\r\n          throw new Error(data.message || \"Что-то пошло не так\");\r\n        }\r\n        setLoading(false);\r\n        return data;\r\n      } catch (e) {\r\n        setLoading(false);\r\n        setError(e.message);\r\n        throw e;\r\n      }\r\n    },\r\n    []\r\n  );\r\n  const clearError = useCallback(() => setError(null), [])\r\n  return { loading, request, error, clearError };\r\n};\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\nimport { useHttp } from \"../hooks/http.hook\";\r\nimport { useMessage } from \"../hooks/message.hook\";\r\n\r\nexport const AuthPage = () => {\r\n  const auth = useContext(AuthContext);\r\n  const message = useMessage();\r\n  const { loading, error, request, clearError } = useHttp();\r\n  const [form, setForm] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    message(error);\r\n    clearError();\r\n  }, [error, message, clearError]);\r\n  useEffect(() => {\r\n    window.M.updateTextFields();\r\n  }, []);\r\n  const changeHandler = (event) => {\r\n    setForm({ ...form, [event.target.name]: event.target.value });\r\n  };\r\n  const registerHandler = async () => {\r\n    try {\r\n      const data = await request(\"/api/auth/register\", \"POST\", { ...form });\r\n      message(data.message);\r\n    } catch (e) {}\r\n  };\r\n  const loginHandler = async () => {\r\n    try {\r\n      const data = await request(\"/api/auth/login\", \"POST\", { ...form });\r\n      auth.login(data.token, data.userId);\r\n    } catch (e) {}\r\n  };\r\n  return (\r\n    <div className=\"row\">\r\n      <div className=\"col s6 offser-s3\">\r\n        <h1>Сократи ссылку</h1>\r\n        <div className=\"card blue darken-1\">\r\n          <div className=\"card-content white-text\">\r\n            <span className=\"card-title\">Авторизация</span>\r\n            <div>\r\n              <div className=\"input-field\">\r\n                <input\r\n                  placeholder=\"Email\"\r\n                  id=\"email\"\r\n                  type=\"text\"\r\n                  name=\"email\"\r\n                  className=\"yellow-input\"\r\n                  value={form.email}\r\n                  onChange={changeHandler}\r\n                />\r\n                <label htmlFor=\"email\">Email</label>\r\n              </div>\r\n              <div className=\"input-field\">\r\n                <input\r\n                  placeholder=\"Введите пароль\"\r\n                  id=\"password\"\r\n                  type=\"password\"\r\n                  name=\"password\"\r\n                  className=\"yellow-input\"\r\n                  value={form.password}\r\n                  onChange={changeHandler}\r\n                />\r\n                <label htmlFor=\"password\">Пароль</label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"card-action\">\r\n            <button\r\n              className=\"btn yellow darken-4\"\r\n              style={{ marginRight: 10 }}\r\n              disabled={loading}\r\n              onClick={loginHandler}\r\n            >\r\n              Войти\r\n            </button>\r\n            <button\r\n              className=\"btn grey lighten-1 black-text\"\r\n              disabled={loading}\r\n              onClick={registerHandler}\r\n            >\r\n              Регистрация\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import { useCallback } from \"react\"\r\n\r\nexport const useMessage = () => {\r\n    return useCallback( (text)=> {\r\n        if (window.M && text) {\r\n            window.M.toast({html: text})\r\n        }\r\n    }, [])\r\n}","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\nimport { useHttp } from \"../hooks/http.hook\";\r\n\r\nexport const CreatePage = () => {\r\n  const history = useHistory();\r\n  const auth = useContext(AuthContext);\r\n  const { request } = useHttp();\r\n  const [link, setLink] = useState(\"\");\r\n  useEffect(() => {\r\n    window.M.updateTextFields();\r\n  }, []);\r\n  const pressHandler = async (event) => {\r\n    if (event.key === \"Enter\") {\r\n      try {\r\n        const data = await request(\r\n          \"/api/link/generate\",\r\n          \"POST\",\r\n          {\r\n            from: link,\r\n          },\r\n          { Authorization: `Bearer ${auth.token}` }\r\n        );\r\n        history.push(`/detail/${data.link._id}`);\r\n        console.log(data);\r\n      } catch (e) {}\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"row\">\r\n      <div className=\"col s8 offser-s2\" style={{ paddingTop: \"2rem\" }}>\r\n        <div className=\"input-field\">\r\n          <input\r\n            placeholder=\"Вставьте ссылку\"\r\n            id=\"link\"\r\n            type=\"text\"\r\n            value={link}\r\n            onChange={(e) => setLink(e.target.value)}\r\n            onKeyPress={pressHandler}\r\n          />\r\n          <label htmlFor=\"link\">Link</label>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\nexport const LinkCard = ({ link }) => {\r\n  return (\r\n    <>\r\n      <h2>Cсылка</h2>\r\n      <p>\r\n        Ваша ссылка:{\" \"}\r\n        <a href={link.to} target=\"_blank\" rel=\"noopener noreferrer\">\r\n          {link.to}\r\n        </a>\r\n      </p>\r\n      <p>\r\n        Откуда:{\" \"}\r\n        <a href={link.from} target=\"_blank\" rel=\"noopener noreferrer\">\r\n          {link.from}\r\n        </a>\r\n      </p>\r\n      <p>\r\n        Количество кликов по ссылке: <strong>{link.clicks}</strong>\r\n      </p>\r\n      <p>\r\n        Дата создания:{\" \"}\r\n        <strong>{new Date(link.date).toLocaleDateString()}</strong>\r\n      </p>\r\n    </>\r\n  );\r\n};\r\n","import React from \"react\";\r\n\r\nexport const Loader = () => (\r\n  <div\r\n    style={{ display: \"flex\", justifyContent: \"center\", paddingTop: \"2rem\" }}\r\n  >\r\n    <div className=\"preloader-wrapper active\">\r\n      <div className=\"spinner-layer spinner-red-only\">\r\n        <div className=\"circle-clipper left\">\r\n          <div className=\"circle\"></div>\r\n        </div>\r\n        <div className=\"gap-patch\">\r\n          <div className=\"circle\"></div>\r\n        </div>\r\n        <div className=\"circle-clipper right\">\r\n          <div className=\"circle\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    ;\r\n  </div>\r\n);\r\n","import React, { useCallback, useContext, useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { LinkCard } from \"../components/LinkCard\";\r\nimport { Loader } from \"../components/Loader\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\nimport { useHttp } from \"../hooks/http.hook\";\r\n\r\nexport const DetailsPage = () => {\r\n  const { token } = useContext(AuthContext);\r\n  const { request, loading } = useHttp();\r\n  const [link, setLink] = useState(null);\r\n  const linkId = useParams().id;\r\n  const getLink = useCallback(async () => {\r\n    try {\r\n      const fetched = await request(`/api/link/${linkId}`, \"GET\", null, {\r\n        Authorization: `Beareer ${token}`,\r\n      });\r\n      setLink(fetched);\r\n    } catch (e) {}\r\n  }, [token, linkId, request]);\r\n  useEffect(() => {\r\n    getLink();\r\n  }, [getLink]);\r\n  if (loading) {\r\n    return <Loader />;\r\n  }\r\n  return <>{!loading && link && <LinkCard link={link} />}</>;\r\n};\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport const LinksList = ({ links }) => {\r\n    console.log(links);\r\n  if (!links.length) {\r\n    return <p className=\"center\">Ссылок пока нет</p>;\r\n  }\r\n\r\n  return (\r\n    <table>\r\n      <thead>\r\n        <tr>\r\n          <th>№</th>\r\n          <th>Оригинальная</th>\r\n          <th>Сщкращенная</th>\r\n          <th>Открыть</th>\r\n        </tr>\r\n      </thead>\r\n\r\n      <tbody>\r\n        {links.map((link, index) => {\r\n          return (\r\n            <tr key={link._id}>\r\n              <td>{index + 1}</td>\r\n              <td>{link.from}</td>\r\n              <td>{link.to}</td>\r\n              <td>\r\n                <Link to={`/detail/${link._id}`}>Открыть</Link>\r\n              </td>\r\n            </tr>\r\n          );\r\n        })}\r\n      </tbody>\r\n    </table>\r\n  );\r\n};\r\n","import React, { useCallback, useContext, useEffect, useState } from \"react\";\r\nimport { LinksList } from \"../components/LinksList\";\r\nimport { Loader } from \"../components/Loader\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\nimport { useHttp } from \"../hooks/http.hook\";\r\n\r\nexport const LinksPage = () => {\r\n  const [links, setLinks] = useState([]);\r\n  const { loading, request } = useHttp();\r\n  const { token } = useContext(AuthContext);\r\n  const fetchLinks = useCallback(async () => {\r\n    try {\r\n      const fetched = await request(`/api/link`, \"GET\", null, {\r\n        Authorization: `Bearer ${token}`,\r\n      });\r\n      setLinks(fetched);\r\n    } catch (e) {}\r\n  }, [token, request]);\r\n  useEffect(() => {\r\n    fetchLinks();\r\n  }, [fetchLinks]);\r\n  if (loading) {\r\n    return <Loader />;\r\n  }\r\n  return <>{!loading && <LinksList links={links} />}</>;\r\n};\r\n","import { useCallback, useEffect, useState } from \"react\";\r\nconst storageName = \"userData\";\r\nexport const useAuth = () => {\r\n  const [token, setToken] = useState(null);\r\n  const [ready, setReady] = useState(false);\r\n  const [userId, setUserId] = useState(null);\r\n  const login = useCallback((jwtToken, id) => {\r\n    setToken(jwtToken);\r\n    setUserId(id);\r\n    localStorage.setItem(\r\n      storageName,\r\n      JSON.stringify({ userId: id, token: jwtToken })\r\n    );\r\n  }, []);\r\n  const logout = useCallback(() => {\r\n    setToken(null);\r\n    setUserId(null);\r\n    localStorage.removeItem(storageName);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const data = JSON.parse(localStorage.getItem(storageName));\r\n    if (data) {\r\n      login(data.token, data.userId);\r\n    }\r\n    setReady(true);\r\n  }, [login]);\r\n\r\n  return { login, logout, token, userId, ready };\r\n};\r\n","import React, { useContext } from \"react\";\r\nimport { NavLink, useHistory } from \"react-router-dom\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\n\r\nexport const Navbar = () => {\r\n    const history = useHistory()\r\n   const auth = useContext(AuthContext)\r\n const logoutHandler = (e)=>{\r\ne.preventDefault()\r\nauth.logout()\r\nhistory.push(\"/\")\r\n }\r\n   return (\r\n    <nav>\r\n      <div className=\"nav-wrapper blue darken-1\" style={{padding: \"0 2rem\"}}>\r\n        <span className=\"brand-logo\">\r\n          Сокращение ссылок\r\n        </span>\r\n        <ul id=\"nav-mobile\" className=\"right hide-on-med-and-down\">\r\n          <li>\r\n            <NavLink to=\"/create\">Создать</NavLink>\r\n          </li>\r\n          <li>\r\n            <NavLink to=\"/links\">Ссылки</NavLink>\r\n          </li>\r\n          <li>\r\n            <a href=\"/\" onClick={logoutHandler}>\r\n              Выйти\r\n            </a>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n","import React from \"react\";\nimport { useRoutes } from \"./routes\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport { useAuth } from \"./hooks/auth.hook\";\nimport { AuthContext } from \"./context/AuthContext\";\nimport { Navbar } from \"./components/Navbar\";\n\nimport \"materialize-css\";\nimport { Loader } from \"./components/Loader\";\nfunction App() {\n  const { token, login, logout, userId, ready } = useAuth();\n  const isAuthenticated = !!token;\n  const routes = useRoutes(isAuthenticated);\n if (!ready) {\n   return <Loader/>\n }\n  return (\n    <AuthContext.Provider\n      value={{ token, login, logout, userId, isAuthenticated }}\n    >\n      <Router>\n      {isAuthenticated && <Navbar/>}\n        <div className=\"container\">{routes}</div>\n      </Router>\n    </AuthContext.Provider>\n  );\n}\n\nexport default App;\n","import React from \"react\";\r\nimport { Switch, Route, Redirect } from \"react-router-dom\";\r\nimport { AuthPage } from \"./pages/AuthPage\";\r\nimport { CreatePage } from \"./pages/CreatePage\";\r\nimport { DetailsPage } from \"./pages/DetailsPage\";\r\nimport { LinksPage } from \"./pages/LinksPage\";\r\nexport const useRoutes = (isAuthenticated) => {\r\n  if (isAuthenticated) {\r\n    return (\r\n      <Switch>\r\n        <Route path=\"/links\" exact>\r\n          <LinksPage />\r\n        </Route>\r\n        <Route path=\"/create\" exact>\r\n          <CreatePage />\r\n        </Route>\r\n        <Route path=\"/detail/:id\">\r\n          <DetailsPage />\r\n        </Route>\r\n        <Redirect to=\"/create\" />\r\n      </Switch>\r\n    );\r\n  }\r\n  return (\r\n    <Switch>\r\n      <Route path=\"/\" exact>\r\n        <AuthPage />\r\n      </Route>\r\n      <Redirect to=\"/\" />\r\n    </Switch>\r\n  );\r\n};\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}